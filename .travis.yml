sudo: required
language: csharp

env:
  global:
    - CGO_ENABLED: 1

matrix:
  include:
    - os: linux
      dist: xenial
      mono: latest
      solution: LibskycoinNet.sln
      env: TYPE=mono
    - os: linux
      dist: xenial
      dotnet: 2.2.102
      solution: LibSkycoinDotNet.sln
      env: TYPE=dotnet
    - os: osx
      oxs_image: xcode8
      solution: lib/swig/LibSkycoinNet.sln
      env: TYPE=mono
      mono: 4.8.0

before_install:
  - ./.travis/install-deps.sh
  - ./.travis/install-travis-gcc.sh
  - eval "CC=gcc && CXX=g++"
  - go get github.com/gz-c/gox

install:
  - eval "$(gimme 1.10)"
  
script:
  - make test-libsky-$TYPE
  - make test-skyapi
  
notifications:
  email: false
  webhooks: https://fathomless-fjord-24024.herokuapp.com/notify

deploy:
  skip_cleanup: true
  provider: script
  script: chmod +x ./.travis/deploy.sh && ./.travis/deploy.sh
  on:
    tags: true
    repo: simelo/libskycoin_dotnet
